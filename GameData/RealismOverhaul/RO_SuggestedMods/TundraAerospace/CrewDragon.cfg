//Crew Dragon Command Pod

@PART[TE_18_DRAGONV2_POD]:FOR[RealismOverhaul] {

	%RSSROConfig = true
	
	%rescaleFactor = 1.48
	
	@description = SpaceX Dragon v2 capsule. Equipped with 8 SuperDraco thrusters.
	
	%engineType = SuperDraco
    %engineTypeMult = 8
    %ignoreMass = True
	%leaveCategory = True
	
	@mass = 8.1
	@crashTolerance = 8
    %breakingForce = 250
    %breakingTorque = 250
    @maxTemp = 900
	%skinMaxTemp = 3000
	%emissiveConstant = 0.85
	%skinMassPerArea = 2
    %thermalMassModifier = 1.0
    @fuelCrossFeed = True
    @vesselType = Ship
    @CrewCapacity = 4
    !stageAfter = False
    !stageBefore = False
    %bulkheadProfiles = size1, size2
	@maximum_drag = 0
	@minimum_drag = 0
	@angularDrag = 0
	
	@MODULE[ModuleCommand]{
	
		@minimumCrew = 0
		
		RESOURCE 
		{
			name = ElectricCharge
			rate = 1.52
		}
	}
	
	!MODULE[ModuleReactionWheel],*{}
	
	!RESOURCE[MonoPropellant]
	!RESOURCE[ElectricCharge]
	
	MODULE 
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 1230.3
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = 72000
			maxAmount = 72000
		}
		TANK
		{
			name = MMH
			amount = 652
			maxAmount = 652
		}
		TANK
		{
			name = NTO
			amount = 506.3
			maxAmount = 506.3
		}
	}
	
	@MODULE[ModuleRCS*],*
	{
		@thrusterPower = 0.4
		!rcsEnabled = True
        !resourceName = NULL
        !resourceFlowMode = NULL
		
		PROPELLANT
		{
			name = MMH
			ratio = 0.5629
		}

		PROPELLANT
		{
			name = NTO
			ratio = 0.4371
		}
		
		@atmosphereCurve
		{
			@key = 0 280
			@key = 1 100
		}
	}
	
	@MODULE[ModuleRCS*]:HAS[thrusterTransformName = RCS]
	{
		%stagingEnabled = True
		%stagingToggleEnabledEditor = True
		%rcsEnabled = False
	}
	@MODULE[ModuleRCS*]:HAS[thrusterTransformName = RCS2]
	{
		%stagingEnabled = False
		%stagingToggleEnabledEditor = True
		%rcsEnabled = False
	}
	
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[TE_Service]] {}
	
	MODULE 
	{
		name = AdjustableCoMShifter
		DescentModeCoM = 0, 0, -0.182
	}
}

//set title etc

@PART[TE_18_DRAGONV2_POD]:AFTER[RealismOverhaulEngines]
{
	%title = Dragon v2
	%category = Pods
	%description = SpaceX Dragon v2 capsule. Equipped with 8 SuperDraco thrusters.
}

//Crew Dragon Heat Shield

@PART[TE_18_DRAGONV2_HEATSHIELD]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@title = Dragon v2 Heat Shield
	@manufacturer = SpaceX
	@mass = 0.2
	%rescaleFactor = 1.48
	
	@maximum_drag = 0
	@minimum_drag = 0
	@angularDrag = 0
	
	%maxTemp = 2400
	%skinMaxTemp = 3600
	
	!MODULE[ModuleAblator] {}
	!MODULE[ModuleHeatShield] {}
	!MODULE[ModuleAeroReentry] {}
	!RESOURCE[AblativeShielding] {}
	!RESOURCE[Ablator] {}
	!RESOURCE[CharredAblator] {}
	%emissiveConstant = 0.6 // not too absorptive for reentry
	%thermalMassModifier = 1.0
	%skinMassPerArea = 4
	MODULE
	{
		name = ModuleAblator
		ablativeResource = Ablator
		outputResource = CharredAblator
		outputMult = 0.75
		lossExp = -40000
		lossConst = 15000
		pyrolysisLossFactor = 40000
		ablationTempThresh = 500
		reentryConductivity = 0.01
		//reentryConductivity = 0.12
		//@reentryConductivity = #$../heatConductivity$ // if it exists, use it
	}
	@MODULE[ModuleAblator]:NEEDS[DeadlyReentry]
	{
		@name = ModuleHeatShield
		depletedMaxTemp = 1200
	}
	RESOURCE
	{
		name = Ablator
		amount = 400
		maxAmount = 400
	}
	RESOURCE
	{
		name = CharredAblator
		amount = 0
		maxAmount = 300
	}
}

//Crew Dragon Trunk

@PART[TE_18_DRAGONV2_TRUNK]:FOR[RealismOverhaul] 
{
	%RSSROConfig = true
	
	@title = Dragon v2 Trunk
	@manufacturer = SpaceX
	
	%rescaleFactor = 1.48
	@mass = 0.4
	
	@maximum_drag = 0
	@minimum_drag = 0
	@angularDrag = 0
	
	!MODULE[ModuleActiveRadiator],* {}
	
	!SolarConfig,* { }
	
	MODULE:NEEDS[!NearFutureSolar]
	{
		name = ModuleDeployableSolarPanel
		isTracking = false
		secondaryTransformName = sunCatcher
		pivotName = sunCatcher
		isBreakable = false
		resourceName = ElectricCharge
		chargeRate = 0.35
	}
	
	%useSolarConfig = true
	%solarUseMass = false
	SolarConfig
	{
		area = 13
		level = 4
		type = static
	}
}